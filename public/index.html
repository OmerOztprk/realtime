<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Realtime WS Bot</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      color: #333;
    }

    h1 {
      margin-bottom: 10px;
      color: #1a73e8;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    button {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      background-color: #1a73e8;
      color: white;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    button:hover:not(:disabled) {
      background-color: #0d62cb;
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    #log {
      height: 200px;
      overflow-y: auto;
      background-color: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-wrap;
      font-size: 14px;
      border: 1px solid #ddd;
    }

    .status-bar {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 8px;
      background-color: #f0f0f0;
      border-radius: 4px;
      border: 1px solid #ddd;
    }

    #status {
      font-weight: 500;
      margin-left: 8px;
    }

    .connected {
      color: green;
    }

    .disconnected {
      color: red;
    }

    .secondary-controls {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }

    .secondary-controls button {
      background-color: #6c757d;
    }

    .secondary-controls button:hover:not(:disabled) {
      background-color: #5a6268;
    }

    .threshold-control {
      margin: 20px 0;
      padding: 10px;
      background-color: #f7f7f7;
      border-radius: 4px;
      border: 1px solid #ddd;
    }

    .threshold-control label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .threshold-control input[type="range"] {
      width: 100%;
      margin-bottom: 5px;
    }

    .threshold-labels {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
    }
    
    .vad-controls {
      margin: 20px 0;
      padding: 10px;
      background-color: #f7f7f7;
      border-radius: 4px;
      border: 1px solid #ddd;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .vad-controls h3 {
      grid-column: 1 / -1;
      margin-top: 0;
      margin-bottom: 10px;
    }
    
    .vad-controls select {
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ddd;
    }
    
    .vad-control-group {
      margin-bottom: 10px;
    }
    
    .transcript-box {
      margin: 20px 0;
      padding: 15px;
      background-color: #f0f4ff;
      border-radius: 4px;
      border: 1px solid #d0d9ff;
    }
    
    .response-box {
      margin: 20px 0;
      padding: 15px;
      background-color: #f0fff4;
      border-radius: 4px;
      border: 1px solid #d0ffd9;
    }
    
    .transcript-label, .response-label {
      font-weight: 600;
      margin-bottom: 8px;
      display: block;
    }
    
    #transcriptDisplay, #botResponseDisplay {
      min-height: 50px;
      padding: 10px;
      background: white;
      border-radius: 4px;
      border: 1px solid #ddd;
    }
    
    .transcript-complete {
      background-color: #eaffea !important;
      transition: background-color 0.5s;
    }
    
    .checkbox-control {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    
    .checkbox-control input {
      margin-right: 8px;
    }
  </style>
</head>

<body>
  <h1>Realtime WebSocket Bot</h1>

  <div class="status-bar">
    <span>Durum:</span>
    <span id="status" class="disconnected">Baƒülanƒ±yor...</span>
  </div>
  
  <div class="transcript-box">
    <span class="transcript-label">Konu≈üma Transkripti:</span>
    <div id="transcriptDisplay">Hen√ºz bir konu≈üma yok</div>
  </div>
  
  <div class="response-box">
    <span class="response-label">Bot Yanƒ±tƒ±:</span>
    <div id="botResponseDisplay">Yanƒ±t bekleniyor...</div>
  </div>

  <div class="controls">
    <button id="startBtn" disabled>üé§ Konu≈ümaya Ba≈üla</button>
    <button id="stopBtn" disabled>‚èπÔ∏è Konu≈ümayƒ± Bitir</button>
    <button id="createResponseBtn">üîÑ Yanƒ±t Olu≈ütur</button>
    <button id="resetBtn">üîÑ Oturumu Sƒ±fƒ±rla</button>
  </div>
  
  <div class="checkbox-control">
    <input type="checkbox" id="continuousMode" />
    <label for="continuousMode">S√ºrekli Konu≈üma Modu (Yanƒ±t sonrasƒ± otomatik ba≈ülat)</label>
  </div>

  <div class="vad-controls">
    <h3>Konu≈üma Algƒ±lama Ayarlarƒ±</h3>
    
    <div class="vad-control-group">
      <label for="vadTypeSelect">VAD Tipi:</label>
      <select id="vadTypeSelect">
        <option value="server" selected>Server VAD (G√ºr√ºlt√º Filtreli)</option>
        <option value="semantic">Semantic VAD (Anlam Tabanlƒ±)</option>
      </select>
    </div>
    
    <div class="vad-control-group">
      <label for="noiseReductionSelect">G√ºr√ºlt√º Azaltma:</label>
      <select id="noiseReductionSelect">
        <option value="near_field" selected>Yakƒ±n Mikrofon</option>
        <option value="far_field">Uzak Mikrofon</option>
      </select>
    </div>
  </div>

  <!-- G√ºr√ºlt√º filtreleme kontrol√º -->
  <div class="threshold-control" id="thresholdControl">
    <label for="thresholdSlider">G√ºr√ºlt√º Filtreleme: <span id="thresholdValue">0.6</span></label>
    <input type="range" id="thresholdSlider" min="0.1" max="0.9" step="0.1" value="0.6"
      oninput="updateThreshold(this.value)">
    <div class="threshold-labels">
      <span>D√º≈ü√ºk (daha duyarlƒ±)</span>
      <span>Y√ºksek (daha az g√ºr√ºlt√º)</span>
    </div>
  </div>

  <h3>Teknik Log:</h3>
  <pre id="log"></pre>

  <script type="module" src="script.js"></script>
</body>

</html>